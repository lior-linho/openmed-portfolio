# OpenMed Sandbox MVP

一个用于冠脉介入手术模拟的科研工具，支持透视、电影、剂量计算和实验数据导出。

## 🚀 最新版本 v0.4.0

### ✨ 核心功能

#### 透视模拟
- 实时 X 射线透视
- 基于时间的剂量积分模型
- 角度预设 (AP, LAO30/CRA20, RAO30/CAU20 等)
- 缩放和遮线控制

#### 数据记录
- 路径长度测量
- 对比剂使用统计
- 剂量指数计算
- 病变覆盖率分析

#### 实验导出
- JSON 格式 (包含完整参数和元数据)
- CSV 格式 (包含实验上下文)
- 参数指纹和运行 ID
- 标准化引用格式

## 🛠️ 技术栈

- **前端**: React 18 + TypeScript
- **3D 渲染**: Three.js + React Three Fiber
- **状态管理**: Zustand
- **构建工具**: Vite

## 📦 安装和运行

```bash
# 安装依赖
npm install

# 开发模式
npm run dev

# 构建生产版本
npm run build

# 预览生产版本
npm run preview
```

## 🎮 操作指南

### 基本操作
1. 选择角度预设或手动调整
2. 调整缩放和遮线设置
3. 使用鼠标或键盘控制透视
4. 记录实验数据
5. 导出结果用于分析

### 快捷键
- **F**: 开始透视 (按住)
- **C**: 开始电影 (3秒)
- **空格**: 单次拍片
- **ESC**: 停止透视

### 数据导出
- **JSON**: 完整实验数据，包含参数和元数据
- **CSV**: 表格格式，便于统计分析

## 📊 版本历史

### v0.4.0 (当前)
- ✅ 时间积分剂量模型
- ✅ 全局停止条件
- ✅ 缩放和遮线功能
- ✅ 键盘快捷键
- ✅ 稳定参数指纹
- ✅ 生产模式优化

### v0.3.0
- 科研可重复性改进
- 剂量模型优化
- 审计导出功能

### v0.2.0
- MVP 基础功能
- 3D/2D 视图
- 基本交互

## 🔬 科研应用

### 可重复性
- 固定随机种子
- 参数哈希追踪
- 完整实验记录

### 临床相关性
- 真实剂量模型
- 临床角度预设
- 医学指标计算

### 数据质量
- 稳定计算算法
- 鲁棒边界处理
- 准确测量工具

## 📝 使用说明

### 界面布局
- **左侧**: 2D 造影主窗
- **右侧**: 数据面板 + 3D 幕后视图
- **控制栏**: 角度、缩放、遮线、操作按钮

### 工作流程
1. **Cross**: 导丝通过病变
2. **Pre-dilate**: 预扩张
3. **Deploy**: 支架释放
4. **Post-dilate**: 后扩张

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

## 📞 联系

如有问题或建议，请通过 GitHub Issues 联系我们。

---

**OpenMed Sandbox v0.4.0** - 精简高效的科研工具 ✨

